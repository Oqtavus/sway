#!/bin/bash

step () {
    echo -e "\e[1;35m==> $1\e[0m"
}

#-------------------------------------------------------------------------------
step 'Format'
#-------------------------------------------------------------------------------

mkfs.ext4 /dev/sda2

#-------------------------------------------------------------------------------
step 'Mount'
#-------------------------------------------------------------------------------

mount /dev/sda2 /mnt

#-------------------------------------------------------------------------------
step 'Mirror'
#-------------------------------------------------------------------------------

echo 'Server = https://mirrors.nix.org.ua/linux/archlinux/$repo/os/$arch' > /etc/pacman.d/mirrorlist
echo 'Server = https://archlinux.ip-connect.vn.ua/$repo/os/$arch' >> /etc/pacman.d/mirrorlist

#-------------------------------------------------------------------------------
step 'Pacstrap'
#-------------------------------------------------------------------------------

pacstrap /mnt base base-devel

#-------------------------------------------------------------------------------
step 'Fstab'
#-------------------------------------------------------------------------------

genfstab -U /mnt >> /mnt/etc/fstab

#-------------------------------------------------------------------------------
step 'Done!'
#-------------------------------------------------------------------------------